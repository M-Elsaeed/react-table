(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,a,t){e.exports=t(84)},47:function(e,a,t){},48:function(e,a,t){},68:function(e,a,t){},70:function(e,a,t){},71:function(e,a,t){},84:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),r=t(34),l=t.n(r),i=t(86),o=t(11),c=(t(47),t(7)),d=t(8),p=t(13),m=t(10),u=t(12),h=t(89),g=t(87),E=(t(48),t(17)),b=t.n(E),v="LOGIN_ATTEMPT",f="INVALID_LOGIN_ATTEMPT",_="LOGIN_ATTEMPT_SUCCESS",N="LOGIN_ATTEMPT_FAILURE",w="CHANGE_EMAIL",y="CHANGE_PASSWORD",k="TOGGLE_REMEMBER",O="RESET_STATE";t(68);var C=t(88),j=function(e){function a(){return Object(c.a)(this,a),Object(p.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(d.a)(a,[{key:"emailValid",value:function(){return/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/gi.test(this.props.email)}},{key:"passValid",value:function(){return/^...+$/gi.test(this.props.password)}},{key:"componentWillUnmount",value:function(){this.props.resetState()}},{key:"render",value:function(){var e=this;return this.props.isLoggedIn?s.a.createElement(C.a,{to:"/dashboard"}):s.a.createElement("div",{className:"ameen-login-component"},s.a.createElement("form",{className:"loginForm"},s.a.createElement("div",{className:"circles-container"},s.a.createElement("div",{className:"semicircle"},s.a.createElement("div",{id:"semicircle__blue",className:"semicircle__blue"}),s.a.createElement("div",{id:"semicircle__logo",className:"semicircle__logo"})),s.a.createElement("div",{className:"dashed-ellipse"},s.a.createElement("div",{id:"dashed-ellipse__border",className:"dashed-ellipse__border"})),s.a.createElement("div",{className:"solid-ellipse"},s.a.createElement("div",{id:"solid-ellipse__border",className:"solid-ellipse__border"}))),s.a.createElement("div",{className:"loginForm__formContainer"},this.props.invalidCredentials&&!this.props.loading?s.a.createElement("div",null,"username and password you added are not registered"):void 0,this.props.submitted||""!==this.props.email?(this.emailValid(),s.a.createElement("input",{name:"email",value:this.props.email,onChange:function(a){return e.props.changeEmail(a.target.value)},placeholder:"email",type:"email"})):s.a.createElement("input",{name:"email",value:this.props.email,onChange:function(a){return e.props.changeEmail(a.target.value)},placeholder:"username",type:"email"}),this.props.submitted&&!this.emailValid()&&""!==this.props.email?s.a.createElement("div",null,s.a.createElement("p",null,"please enter valid format")):void 0,this.props.submitted&&!this.emailValid()&&""===this.props.email?s.a.createElement("div",null,s.a.createElement("p",null,"please fill the field password username")):void 0,this.props.submitted||""!==this.props.password?(this.passValid(),s.a.createElement("input",{name:"password",value:this.props.password,onChange:function(a){return e.props.changePassword(a.target.value)},placeholder:"password",type:"password"})):s.a.createElement("input",{name:"password",value:this.props.password,onChange:function(a){return e.props.changePassword(a.target.value)},placeholder:"password",type:"password"}),this.props.submitted&&!this.passValid()&&""!==this.props.password?s.a.createElement("div",null,s.a.createElement("p",null,"please enter valid format")):void 0,this.props.submitted&&!this.passValid()&&""===this.props.password?s.a.createElement("div",null,s.a.createElement("p",null,"please fill the field password")):void 0,s.a.createElement("label",null,"true"===this.props.remember?s.a.createElement("input",{checked:!0,name:"remember",onChange:function(a){return e.props.toggleRemember()},type:"checkbox"}):s.a.createElement("input",{name:"remember",onChange:function(a){return e.props.toggleRemember()},type:"checkbox"}),"Remember Me"),this.props.loading?s.a.createElement("button",{onClick:function(e){return e.preventDefault()},disabled:!0,style:{cursor:"not-allowed"},className:"loginButton"},"Please Wait..."):s.a.createElement("button",{onClick:function(a){a.preventDefault(),e.emailValid()&&e.passValid()?e.props.login({email:e.props.email,password:e.props.password,remember:e.props.remember}):e.props.invalidLoginAttempt()},className:"loginButton"},"LOG IN"))))}}]),a}(n.Component),F=function(){function e(){Object(c.a)(this,e)}return Object(d.a)(e,null,[{key:"setCookie",value:function(e,a,t){var n=new Date;n.setTime(n.getTime()+24*t*60*60*1e3);var s="expires="+n.toUTCString();document.cookie=e+"="+a+";"+s+";path=/"}},{key:"getCookie",value:function(e){for(var a=e+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var s=t[n];" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(a))return s.substring(a.length,s.length)}return""}},{key:"checkUserCookie",value:function(){return""!==this.getCookie("webkeyzAccessToken")}}]),e}(),L=Object(o.b)(function(e){return{email:e.login.email,password:e.login.password,remember:e.login.remember,submitted:e.login.submitted,loading:e.login.loading,isLoggedIn:e.login.isLoggedIn,invalidCredentials:e.login.invalidCredentials}},function(e,a){return{resetState:function(){e({type:O})},invalidLoginAttempt:function(){e({type:f})},changeEmail:function(a){e(function(e){return{type:w,newEmail:e}}(a))},changePassword:function(a){e(function(e){return{type:y,newPassword:e}}(a))},toggleRemember:function(){e({type:k})},login:function(a){e(function(e){var a=b.a.post("http://173.199.166.52/~wknode/api/api/login",e);return{type:v,loading:!0,payload:a}}(a)).payload.then(function(t){var n;"true"===t.data.status?(F.setCookie("webkeyzAccessToken",t.data.access_token,1),"true"===a.remember&&(F.setCookie("savedEmail",a.email,30),F.setCookie("savedPassword",a.password,30),F.setCookie("rememberMe",a.remember,30)),e({type:_,loading:!1})):e((n=t.data.message,{type:N,loading:!1,errors:n}))})}}})(j),T="PRE_FETCH",A="FETCH",I="FETCH_SUCCESS",U="FETCH_FAILURE",P="UPDATE_FILTER";var M=1;function S(){return{type:U}}t(70),t(71);var R,D=function(e){function a(){return Object(c.a)(this,a),Object(p.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.fetch()}},{key:"getNumberOfUsers",value:function(){return this.props.users?this.props.users.usersNo:""}},{key:"isLoading",value:function(){return console.log(this.props.loading),this.props.loading}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"ameen-dashboard-component"},s.a.createElement("div",{className:"side-panel-back"}),s.a.createElement("div",{className:"side-panel"},s.a.createElement("div",{className:"side-panel__semi-circle"},s.a.createElement("div",{id:"side-panel__blue",className:"side-panel__blue"}),s.a.createElement("div",{id:"side-panel__logo",className:"side-panel__logo"})),s.a.createElement("div",{className:"dashed-ellipse"},s.a.createElement("div",{id:"dashed-ellipse__border",className:"dashed-ellipse__border"})),s.a.createElement("div",{className:"solid-ellipse"},s.a.createElement("div",{id:"solid-ellipse__border",className:"solid-ellipse__border"})),s.a.createElement("div",{className:"side-panel__tabs"},s.a.createElement("div",{className:"side-panel__tab --active"},s.a.createElement("p",null,s.a.createElement("i",{className:"icon-User --float-left"},s.a.createElement("span",null," Users")),s.a.createElement("i",{className:"icon-Arrow --float-right --small-icon"}))),s.a.createElement("div",{className:"side-panel__tab"},s.a.createElement("p",{className:"--inactive"},s.a.createElement("i",{className:"icon-Askar --float-left"},s.a.createElement("span",null," Azkar")),s.a.createElement("i",{className:"icon-Arrow --float-right --small-icon"}))))),s.a.createElement("div",{className:"top-bar"},s.a.createElement("div",{className:"top-bar__users"},s.a.createElement("i",{className:"icon-User --float-left"})," ",s.a.createElement("span",null,"\xa0",this.getNumberOfUsers()," Users")),s.a.createElement("div",{className:"top-bar__add-btn"},s.a.createElement("i",{className:"icon-Plus --float-left --small-icon"}),s.a.createElement("span",null,"\xa0Add User"))),s.a.createElement("div",{className:"user-side-bar"},s.a.createElement("div",{className:"user-side-bar__img"}),s.a.createElement("div",{className:"user-side-bar__hello"},s.a.createElement("span",null,"Hello"),s.a.createElement("br",null),s.a.createElement("span",{className:"--sky-blue"},"M.Diab"))),s.a.createElement("div",{className:"content"},s.a.createElement("div",null,s.a.createElement("div",{className:"--header-div"},s.a.createElement("p",null,"Users"),s.a.createElement("input",{id:"filter",placeholder:"search",onChange:function(a){e.props.updateFilter(a.target.value)},type:"text"})),s.a.createElement("div",{className:"--header-div"},s.a.createElement("p",null,"ID"),s.a.createElement("p",null,"NAME"),s.a.createElement("p",null,"EMAIL"),s.a.createElement("p",null,"ROLE")),this.props.succeededFetching?this.props.users.usersList.filter(function(a){return a.fullName.includes(e.props.filter)}).map(function(e,a){return s.a.createElement("div",{key:a,className:"--data-div"},s.a.createElement("p",null,e.userID),s.a.createElement("p",{className:"--sky-blue"},e.fullName),s.a.createElement("p",null,e.contactInfo),s.a.createElement("p",null,e.role))}):void 0,this.props.failedFetching&&!this.props.succeededFetching?s.a.createElement("div",{className:""},"Failed To fetch content"):void 0,this.props.failedFetching&&this.props.succeededFetching?s.a.createElement("div",{className:""},"No more Users!"):void 0,this.props.failedFetching&&this.props.succeededFetching?void 0:s.a.createElement("button",{className:"view-more",onClick:function(a){a.preventDefault(),e.props.fetch()},disabled:this.isLoading()},"View More..."))))}}]),a}(n.Component),V=Object(o.b)(function(e){return{succeededFetching:e.dashboard.succeededFetching,failedFetching:e.dashboard.failedFetching,loading:e.dashboard.loading,users:e.dashboard.users,filter:e.dashboard.filter}},function(e){return{updateFilter:function(a){e(function(e){return{type:P,newFilter:e}}(a))},fetch:function(){e({type:T}),e(function(){console.log("fetch called");var e=b.a.post("http://173.199.166.52/~wknode/api/api/users",{pageSize:500,pageIndex:M++},{headers:{Authorization:F.getCookie("webkeyzAccessToken")}});return console.log(M),{type:A,payload:e}}()).then(function(a){var t;"true"===a.payload.data.status?e((t=a.payload.data,{type:I,users:t})):e(S())}).catch(function(a){console.log(a),e(S())})}}})(D),x=function(e){function a(){return Object(c.a)(this,a),Object(p.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(h.a,null,s.a.createElement(g.a,{exact:!0,path:"/",component:L}),s.a.createElement(g.a,{exact:!0,path:"/Login",component:L}),s.a.createElement(g.a,{exact:!0,path:"/Dashboard",component:V})))}}]),a}(n.Component),z=t(9),G=t(4),H={email:F.getCookie("savedEmail"),password:F.getCookie("savedPassword"),remember:F.getCookie("rememberMe"),submitted:!1,loading:!1,isLoggedIn:F.checkUserCookie(),invalidCredentials:!1},B=t(20),W={succeededFetching:!1,failedFetching:!1,loading:!1,users:void 0,filter:""},J=Object(z.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case O:return Object(G.a)({},H);case f:return Object(G.a)({},e,{submitted:!0});case v:return Object(G.a)({},e,{response:a.payload,loading:a.loading,isLoggedIn:!1,submitted:!0});case _:return Object(G.a)({},e,{loading:a.loading,isLoggedIn:!0});case N:return Object(G.a)({},e,{errorResponse:a.errors,loading:a.loading,isLoggedIn:!1,submitted:!0,invalidCredentials:!0});case w:return Object(G.a)({},e,{email:a.newEmail});case y:return Object(G.a)({},e,{password:a.newPassword});case k:var t="true"===e.remember;return t=!t,t=String(t),Object(G.a)({},e,{remember:t});default:return e}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case P:return console.log("filter Updated"),console.log(a.newFilter),Object(G.a)({},e,{filter:a.newFilter});case T:return console.log("this was called"),Object(G.a)({},e,{loading:!0});case A:return console.log("this was called"),Object(G.a)({},e,{payload:a.payload});case I:var t;return console.log(e.users),e.users?(console.log("error else"),t=[].concat(Object(B.a)(e.users.usersList),Object(B.a)(a.users.usersList))):(console.log("error if"),t=Object(B.a)(a.users.usersList)),console.log(t),Object(G.a)({},e,{succeededFetching:!0,failedFetching:!1,loading:!1,users:Object(G.a)({},a.users,{usersList:t})});case U:return Object(G.a)({},e,{failedFetching:!0,loading:!1});default:return e}}}),$=t(36),q=t.n($);t(83);R=Object(z.a)(q.a);var K=Object(z.d)(R),Q=Object(z.e)(J,K);l.a.render(s.a.createElement(o.a,{store:Q},s.a.createElement(i.a,null,s.a.createElement(x,null))),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.951163c5.chunk.js.map